DESCRIPTION='Handle URL: PUT a new handle with different modes'

source 'common.inc'

function systemtest() (
  set -e
  ${CURL} --request 'DELETE' "${BASEURL}/${TESTHANDLE}" || true
  ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' --header 'If-None-Match: *' "${BASEURL}/${TESTHANDLE}"
  if ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' --header 'If-None-Match: *' "${BASEURL}/${TESTHANDLE}";
  then false; else true; fi
  ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' --header 'If-Match: *' "${BASEURL}/${TESTHANDLE}"
  ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' "${BASEURL}/${TESTHANDLE}"
  ${CURL} --request 'DELETE' "${BASEURL}/${TESTHANDLE}"
  if ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' --header 'If-Match: *' "${BASEURL}/${TESTHANDLE}";
  then false; else true; fi
  ${CURL} --upload-file 'input_2.2_2' --header 'Content-Type: application/json' "${BASEURL}/${TESTHANDLE}"  
)
